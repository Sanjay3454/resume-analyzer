import{p as e,a as l,v as x,w as p,x as j}from"./chunk-EPOLDU6W-QBkHEJ6v.js";import{N as b}from"./Navbar-DwbOzK38.js";import{u as h}from"./puter-Cw-rezRe.js";const g=({score:a=75})=>{const t=2*Math.PI*36,c=a/100,r=t*(1-c),o=(s=>s>=70?"#10b981":s>=50?"#f59e0b":"#ef4444")(a);return e.jsxs("div",{className:"relative w-[80px] h-[80px]",children:[e.jsxs("svg",{height:"100%",width:"100%",viewBox:"0 0 100 100",className:"transform -rotate-90",children:[e.jsx("circle",{cx:"50",cy:"50",r:36,stroke:"#f1f5f9",strokeWidth:8,fill:"transparent"}),e.jsx("circle",{cx:"50",cy:"50",r:36,stroke:o,strokeWidth:8,fill:"transparent",strokeDasharray:t,strokeDashoffset:r,strokeLinecap:"round",className:"transition-all duration-1000 ease-out"})]}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsx("span",{className:"font-bold text-sm text-slate-900",children:a}),e.jsx("span",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-medium",children:"Score"})]})]})},v=({resume:{id:a,companyName:n,jobTitle:m,feedback:i,imagePath:t}})=>{const{fs:c}=h(),[r,d]=l.useState("");return l.useEffect(()=>{(async()=>{if(!t)return;const s=await c.read(t);if(!s)return;let u=URL.createObjectURL(s);d(u)})()},[t]),e.jsxs(x,{to:`/resume/${a}`,className:"group card hover:border-brand-300 hover:ring-1 hover:ring-brand-300 transition-all duration-200 block h-full flex flex-col",children:[e.jsxs("div",{className:"card-header flex justify-between items-start gap-4",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 truncate",children:n||"Untitled Application"}),e.jsx("p",{className:"text-sm text-slate-500 truncate",children:m||"Resume Analysis"})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(g,{score:i.overallScore})})]}),e.jsx("div",{className:"p-4 flex-1 bg-slate-50 flex items-center justify-center overflow-hidden",children:r?e.jsxs("div",{className:"relative w-full aspect-[3/4] shadow-sm rounded-lg overflow-hidden ring-1 ring-slate-200 bg-white",children:[e.jsx("img",{src:r,alt:"resume thumbnail",className:"w-full h-full object-cover object-top opacity-90 group-hover:opacity-100 transition-opacity"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"})]}):e.jsx("div",{className:"w-full aspect-[3/4] rounded-lg border-2 border-dashed border-slate-200 flex items-center justify-center text-slate-400",children:e.jsx("span",{className:"text-sm",children:"No Preview"})})})]})};function k({}){return[{title:"Resumind"},{name:"description",content:"Smart feedback for your dream job!"}]}const R=p(function(){const{auth:n,kv:m}=h(),i=j(),[t,c]=l.useState([]),[r,d]=l.useState(!1);return l.useEffect(()=>{n.isAuthenticated||i("/auth?next=/")},[n.isAuthenticated,i]),l.useEffect(()=>{(async()=>{d(!0);try{const s=await m.list("resume:*",!0),u=(s==null?void 0:s.map(f=>JSON.parse(f.value)))||[];c(u)}catch(s){console.error("Failed to load resumes",s)}finally{d(!1)}})()},[]),e.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col",children:[e.jsx(b,{}),e.jsxs("main",{className:"flex-1 container-main w-full",children:[e.jsxs("div",{className:"py-12 text-center max-w-3xl mx-auto mb-12",children:[e.jsx("h1",{className:"mb-4",children:"Track your applications & ratings"}),e.jsx("p",{className:"text-xl text-slate-600",children:!r&&t.length===0?"Upload your first resume to get AI-powered feedback.":"Review your submissions and improve your score."})]}),r?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[e.jsxs("svg",{className:"animate-spin h-10 w-10 text-brand-600 mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("p",{className:"text-slate-500",children:"Loading your resumes..."})]}):e.jsx(e.Fragment,{children:t.length>0?e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[t.map(o=>e.jsx(v,{resume:o},o.id)),e.jsxs(x,{to:"/upload",className:"group border-2 border-dashed border-slate-300 rounded-xl flex flex-col items-center justify-center p-8 hover:border-brand-500 hover:bg-brand-50 transition-all cursor-pointer min-h-[300px]",children:[e.jsx("div",{className:"bg-slate-100 p-4 rounded-full group-hover:bg-brand-100 transition-colors mb-4",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-slate-400 group-hover:text-brand-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),e.jsx("span",{className:"font-medium text-slate-900 group-hover:text-brand-700",children:"Analyze New Resume"})]})]}):e.jsx("div",{className:"flex flex-col items-center justify-center mt-10 gap-6",children:e.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-slate-200 text-center max-w-lg",children:[e.jsx("div",{className:"bg-brand-50 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-brand-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("h3",{className:"mb-2",children:"No resumes yet"}),e.jsx("p",{className:"text-slate-500 mb-8",children:"Upload your resume to get instant feedback on your ATS score, formatting, and content."}),e.jsx(x,{to:"/upload",className:"btn btn-primary btn-large w-full",children:"Upload Resume"})]})})})]})]})});export{R as default,k as meta};
