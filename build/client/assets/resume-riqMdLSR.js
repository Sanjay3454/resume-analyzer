import{a as d,p as e,w as B,A as T,x as W}from"./chunk-EPOLDU6W-QBkHEJ6v.js";import{u as $}from"./puter-Cw-rezRe.js";import{N as U}from"./Navbar-DwbOzK38.js";import{c as g}from"./utils-BfpOqbi7.js";const G=({score:s=75})=>{const[t,r]=d.useState(0),l=d.useRef(null),a=s/100;d.useEffect(()=>{l.current&&r(l.current.getTotalLength())},[]);let n="#ef4444",i="#fca5a5";return s>69?(n="#10b981",i="#34d399"):s>49&&(n="#f59e0b",i="#fbbf24"),e.jsx("div",{className:"flex flex-col items-center",children:e.jsxs("div",{className:"relative w-40 h-20 overflow-hidden",children:[e.jsxs("svg",{viewBox:"0 0 100 50",className:"w-full h-full text-slate-200",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"gaugeGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:n}),e.jsx("stop",{offset:"100%",stopColor:i})]})}),e.jsx("path",{d:"M10,50 A40,40 0 0,1 90,50",fill:"none",stroke:"currentColor",strokeWidth:"10",strokeLinecap:"round"}),e.jsx("path",{ref:l,d:"M10,50 A40,40 0 0,1 90,50",fill:"none",stroke:"url(#gaugeGradient)",strokeWidth:"10",strokeLinecap:"round",strokeDasharray:t,strokeDashoffset:t*(1-a),className:"transition-all duration-1000 ease-out"})]}),e.jsx("div",{className:"absolute inset-x-0 bottom-0 flex flex-col items-center justify-end",children:e.jsx("div",{className:"text-3xl font-bold text-slate-900 leading-none",children:s})})]})})},S=({score:s})=>{let t="",r="";return s>70?(t="bg-emerald-50 text-emerald-700 ring-emerald-600/20",r="Strong"):s>49?(t="bg-amber-50 text-amber-700 ring-amber-600/20",r="Good Start"):(t="bg-rose-50 text-rose-700 ring-rose-600/20",r="Needs Work"),e.jsx("div",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ring-1 ring-inset ${t}`,children:r})},m=({title:s,score:t})=>e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-slate-100 last:border-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-medium text-slate-700",children:s}),e.jsx(S,{score:t})]}),e.jsxs("div",{className:"text-sm font-semibold text-slate-900",children:[t,"/100"]})]}),M=({feedback:s})=>e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6 mb-6",children:[e.jsx(G,{score:s.overallScore}),e.jsxs("div",{className:"text-center md:text-left",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Overall Score"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Based on industry standards and job description relevance."})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{title:"Tone & Style",score:s.toneAndStyle.score}),e.jsx(m,{title:"Content",score:s.content.score}),e.jsx(m,{title:"Structure",score:s.structure.score}),e.jsx(m,{title:"Skills",score:s.skills.score})]})]}),P=({score:s,suggestions:t})=>{const r=s>69,l=s>49;let a="text-rose-600",n="bg-rose-50 border-rose-100",i="Needs Improvement";return r?(a="text-emerald-600",n="bg-emerald-50 border-emerald-100",i="ATS Optimized"):l&&(a="text-amber-600",n="bg-amber-50 border-amber-100",i="Needs Work"),e.jsxs("div",{className:`rounded-xl border p-6 ${n}`,children:[e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[e.jsx("div",{className:`p-2 rounded-lg bg-white ${a}`,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-bold text-slate-900",children:[i," (",s,"/100)"]}),e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Likelihood to pass automated ATS filters."})]})]}),e.jsx("div",{className:"space-y-3 pl-1",children:t.map((x,o)=>e.jsxs("div",{className:"flex items-start gap-3 text-sm",children:[e.jsx("span",{className:`mt-0.5 flex-shrink-0 ${x.type==="good"?"text-emerald-600":"text-amber-600"}`,children:x.type==="good"?e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("span",{className:"text-slate-700 leading-relaxed",children:x.tip})]},o))})]})},A=d.createContext(void 0),L=()=>{const s=d.useContext(A);if(!s)throw new Error("Accordion components must be used within an Accordion");return s},D=({children:s,defaultOpen:t,allowMultiple:r=!1,className:l=""})=>{const[a,n]=d.useState(t?[t]:[]),i=o=>{n(c=>r?c.includes(o)?c.filter(v=>v!==o):[...c,o]:c.includes(o)?[]:[o])},x=o=>a.includes(o);return e.jsx(A.Provider,{value:{activeItems:a,toggleItem:i,isItemActive:x},children:e.jsx("div",{className:`space-y-2 ${l}`,children:s})})},h=({id:s,children:t,className:r=""})=>e.jsx("div",{className:`overflow-hidden border-b border-gray-200 ${r}`,children:t}),u=({itemId:s,children:t,className:r="",icon:l,iconPosition:a="right"})=>{const{toggleItem:n,isItemActive:i}=L(),x=i(s),o=e.jsx("svg",{className:g("w-5 h-5 transition-transform duration-200",{"rotate-180":x}),fill:"none",stroke:"#98A2B3",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),c=()=>{n(s)};return e.jsxs("button",{onClick:c,className:`
        w-full px-4 py-3 text-left
        focus:outline-none
        transition-colors duration-200 flex items-center justify-between cursor-pointer
        ${r}
      `,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[a==="left"&&(l||o),e.jsx("div",{className:"flex-1",children:t})]}),a==="right"&&(l||o)]})},j=({itemId:s,children:t,className:r=""})=>{const{isItemActive:l}=L(),a=l(s);return e.jsx("div",{className:`
        overflow-hidden transition-all duration-300 ease-in-out
        ${a?"max-h-fit opacity-100":"max-h-0 opacity-0"}
        ${r}
      `,children:e.jsx("div",{className:"px-4 py-3 ",children:t})})},f=({title:s,categoryScore:t})=>e.jsxs("div",{className:"flex flex-row gap-4 items-center w-full",children:[e.jsx("span",{className:"text-lg font-semibold text-slate-800",children:s}),e.jsx("div",{className:"ml-auto",children:e.jsx(S,{score:t})})]}),p=({tips:s})=>e.jsx("div",{className:"space-y-4 pt-2 pb-4",children:s.map((t,r)=>{const l=t.type==="good";return e.jsx("div",{className:g("flex flex-col gap-2 rounded-lg p-4 border",l?"bg-slate-50 border-emerald-200":"bg-slate-50 border-amber-200"),children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:g("mt-1 p-1 rounded-full flex-shrink-0 h-fit",l?"bg-emerald-100 text-emerald-600":"bg-amber-100 text-amber-600"),children:l?e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsxs("div",{children:[e.jsx("p",{className:g("font-medium text-base",l?"text-emerald-900":"text-amber-900"),children:t.tip}),e.jsx("p",{className:"text-sm text-slate-600 mt-1 leading-relaxed",children:t.explanation})]})]})},r+t.tip)})}),E=({feedback:s})=>e.jsxs("div",{className:"card w-full overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-slate-100 bg-slate-50/50",children:e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Detailed Feedback"})}),e.jsxs(D,{className:"divide-y divide-slate-100",children:[e.jsxs(h,{id:"tone-style",className:"border-none",children:[e.jsx(u,{itemId:"tone-style",className:"hover:bg-slate-50",children:e.jsx(f,{title:"Tone & Style",categoryScore:s.toneAndStyle.score})}),e.jsx(j,{itemId:"tone-style",children:e.jsx(p,{tips:s.toneAndStyle.tips})})]}),e.jsxs(h,{id:"content",className:"border-none",children:[e.jsx(u,{itemId:"content",className:"hover:bg-slate-50",children:e.jsx(f,{title:"Content",categoryScore:s.content.score})}),e.jsx(j,{itemId:"content",children:e.jsx(p,{tips:s.content.tips})})]}),e.jsxs(h,{id:"structure",className:"border-none",children:[e.jsx(u,{itemId:"structure",className:"hover:bg-slate-50",children:e.jsx(f,{title:"Structure",categoryScore:s.structure.score})}),e.jsx(j,{itemId:"structure",children:e.jsx(p,{tips:s.structure.tips})})]}),e.jsxs(h,{id:"skills",className:"border-none",children:[e.jsx(u,{itemId:"skills",className:"hover:bg-slate-50",children:e.jsx(f,{title:"Skills",categoryScore:s.skills.score})}),e.jsx(j,{itemId:"skills",children:e.jsx(p,{tips:s.skills.tips})})]})]})]}),_=()=>[{title:"Resumind | Review "},{name:"description",content:"Detailed overview of your resume"}],O=()=>{const{auth:s,isLoading:t,fs:r,kv:l}=$(),{id:a}=T(),[n,i]=d.useState(""),[x,o]=d.useState(""),[c,v]=d.useState(null),N=W();return d.useEffect(()=>{!t&&!s.isAuthenticated&&N(`/auth?next=/resume/${a}`)},[t,s.isAuthenticated,N,a]),d.useEffect(()=>{(async()=>{const w=await l.get(`resume:${a}`);if(!w)return;const b=JSON.parse(w),y=await r.read(b.resumePath);if(!y)return;const C=new Blob([y],{type:"application/pdf"}),I=URL.createObjectURL(C);o(I);const k=await r.read(b.imagePath);if(!k)return;const R=URL.createObjectURL(k);i(R),v(b.feedback)})()},[a]),e.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col",children:[e.jsx(U,{}),e.jsx("main",{className:"flex-1 w-full max-w-[1600px] mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 h-[calc(100vh-8rem)] min-h-[600px]",children:[e.jsx("div",{className:"lg:col-span-5 h-full flex flex-col",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden flex flex-col h-full sticky top-4",children:[e.jsxs("div",{className:"p-4 border-b border-slate-200 flex justify-between items-center bg-slate-50",children:[e.jsx("h2",{className:"font-semibold text-slate-700",children:"Resume Preview"}),x&&e.jsx("a",{href:x,target:"_blank",rel:"noopener noreferrer",className:"text-brand-600 hover:text-brand-700 text-sm font-medium",children:"Open PDF â†—"})]}),e.jsx("div",{className:"flex-1 overflow-auto bg-slate-200 p-4 flex items-start justify-center",children:n?e.jsx("img",{src:n,className:"w-full max-w-full shadow-lg rounded-sm",alt:"resume preview"}):e.jsx("div",{className:"flex items-center justify-center h-full text-slate-400",children:"Loading preview..."})})]})}),e.jsx("div",{className:"lg:col-span-7 h-full overflow-y-auto pr-2 custom-scrollbar",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Analysis Results"}),e.jsx("span",{className:"text-sm text-slate-500",children:"Generated by AI"})]}),c?e.jsxs(e.Fragment,{children:[e.jsx(M,{feedback:c}),e.jsx(P,{score:c.ATS.score||0,suggestions:c.ATS.tips||[]}),e.jsx(E,{feedback:c})]}):e.jsxs("div",{className:"card p-12 flex flex-col items-center justify-center text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-slate-200 border-t-brand-600 rounded-full animate-spin"}),e.jsx("p",{className:"text-lg font-medium text-slate-900",children:"Analyzing your resume..."}),e.jsx("p",{className:"text-slate-500 max-w-sm",children:"This usually takes about 10-20 seconds. We're checking against ATS standards and job requirements."})]})]})})]})})]})},K=B(O);export{K as default,_ as meta};
